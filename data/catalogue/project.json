{
  "name": "catalogue",
  "$schema": "../../node_modules/nx/schemas/project-schema.json",
  "sourceRoot": "data/catalogue/scripts",
  "projectType": "application",
  "tags": ["type:data", "platform:python"],
  "targets": {
    "python:install": {
      "executor": "nx:run-commands",
      "options": {
        "command": "pip install -r requirements.txt",
        "cwd": "data/catalogue"
      }
    },
    "python:install-dev": {
      "executor": "nx:run-commands",
      "options": {
        "command": "pip install -r requirements.txt && pip install -e .",
        "cwd": "data/catalogue"
      }
    },
    "opentdb:download": {
      "executor": "nx:run-commands",
      "options": {
        "command": "python scripts/opentdb/downloader.py",
        "cwd": "data/catalogue"
      }
    },
    "opentdb:download-reset": {
      "executor": "nx:run-commands",
      "options": {
        "command": "python scripts/opentdb/downloader.py --reset-tokens",
        "cwd": "data/catalogue"
      }
    },
    "opentdb:dry-run": {
      "executor": "nx:run-commands",
      "options": {
        "command": "python scripts/opentdb/downloader.py --dry-run",
        "cwd": "data/catalogue"
      }
    },
    "opentdb:status": {
      "executor": "nx:run-commands",
      "options": {
        "command": "ls -la raw/opentdb/ && find raw/opentdb/ -name '*.json' | wc -l",
        "cwd": "data/catalogue"
      }
    },
    "opentdb:clean": {
      "executor": "nx:run-commands",
      "options": {
        "command": "rm -rf raw/opentdb/* && echo 'OpenTDB data cleaned'",
        "cwd": "data/catalogue"
      }
    },
    "lint:python": {
      "executor": "nx:run-commands",
      "options": {
        "commands": ["flake8 scripts/", "black --check scripts/"],
        "cwd": "data/catalogue",
        "parallel": false
      }
    },
    "format:python": {
      "executor": "nx:run-commands",
      "options": {
        "command": "black scripts/",
        "cwd": "data/catalogue"
      }
    },
    "test:python": {
      "executor": "nx:run-commands",
      "options": {
        "command": "pytest scripts/ -v",
        "cwd": "data/catalogue"
      }
    }
  }
}
